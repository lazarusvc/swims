<a asp-action="Index"><< | back</a>
@{
    ViewData["Title"] = "Complete & Publish";
}

<hr />
<br />
<div class="row">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                @Html.Raw(@ViewBag.header)
            </div>
            <div class="card-body">
                <div id="fb-rendered-form"></div>
            </div>
        </div>
    </div>
    <div class="col-md-12">
        <br/>
        <div class="btn-group" role="group" aria-label="Default button group">
            <form asp-action="Complete">
                <input type="hidden" name="formId" value="@ViewBag.id" />
                <button type="submit" class="btn btn-success text-success-main px-20 py-13 radius-8 text-white d-flex" style="border-top-right-radius:0px; border-bottom-right-radius: 0px;">
                    <iconify-icon icon="bitcoin-icons:share-filled" class="text-xl"></iconify-icon>
                    Publish
                </button> 
            </form>
            <a asp-action="Edit" asp-route-id="@ViewBag.id" type="button" class="btn btn-info text-info-main px-20 py-13 radius-8 text-white d-flex">
                <iconify-icon icon="lucide:edit"></iconify-icon>
                Edit
            </a>
            <a asp-action="Delete" asp-route-id="@ViewBag.id" type="button" class="btn btn-danger text-danger-main px-20 py-13 radius-8 text-white d-flex">
                <iconify-icon icon="mingcute:delete-2-line"></iconify-icon>
                Delete
            </a>
        </div>
    </div>    
</div>


<link href="~/css/forms-stylesheet.css" rel="stylesheet" />
<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/lib/formbuilder/form-render.min.js"></script>
<link href="~/lib/trumbowyg-editor/ui/trumbowyg.min.css" rel="stylesheet" />
<script src="~/lib/trumbowyg-editor/trumbowyg.min.js"></script>
<script type="text/javascript">
    // RENDER FORM
    //
    // -----------------------------------------------------------------------------------------------------
    jQuery(function($) {
      var container = document.getElementById('fb-rendered-form');
      var formData = '@Html.Raw(ViewBag.frm)';

      var formRenderOpts = {
        container,
        formData,
        dataType: 'json'
      };

      $(container).formRender(formRenderOpts);
    });

    // ------------------------------------------- TINYMCE - WYSWYGET EDITOR
    jQuery(function ($) {
        $(".trumbowyg").trumbowyg({
            btns: [
                ['viewHTML'],
                ['undo', 'redo'], // Only supported in Blink browsers
                ['formatting'],
                ['strong', 'em', 'del'],
                ['superscript', 'subscript'],
                ['link'],
                ['insertImage'],
                ['justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull'],
                ['unorderedList', 'orderedList'],
                ['horizontalRule'],
                ['removeformat'],
                ['fullscreen']
            ],
            autogrow: true
        });
    });
</script>